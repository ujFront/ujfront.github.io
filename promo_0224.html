<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Urban Jungle</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <!-- <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
  <link href="assets/css/uj_colors.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <!-- <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet"> -->
  <!-- <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet"> -->

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Day
  * Updated: May 30 2023 with Bootstrap v5.3.0
  * Template URL: https://bootstrapmade.com/day-multipurpose-html-template-for-free/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Top Bar ======= -->
  <section id="topbar" class="d-flex align-items-center">
    <div class="container d-flex justify-content-center justify-content-md-between">
      <div class="contact-info d-flex align-items-center">
        <i class="bi bi-envelope-fill"></i><a href="mailto:admin@urbanjungleirc.com">admin@urbanjungleirc.com</a>
        <i class="bi bi-phone-fill phone-icon"></i><a href="tel:+61863970411">(08) 6397 0411</a>
      </div>
      <div class="social-links d-none d-md-block">
        <a href="http://www.facebook.com/urbanjungleirc" class="facebook"><i class="bi bi-facebook"></i></a>
        <a href="https://www.instagram.com/urbanjungleirc" class="instagram"><i class="bi bi-instagram"></i></a>
      </div>
    </div>
  </section>

  <!-- ======= Header ======= -->
  <header id="header" class="d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">

      <h1 class="logo"><a href="https://www.urbanjungleirc.com/" class="logo"><img
            src="assets/img/UrbanJungle-Logo_trans.png" alt="" class="img-fluid"> Urban Jungle </a><span>IRC</span></h1>
      <!-- Uncomment below if you prefer to use an image logo -->


      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="scrollto active" href="#hero">Home</a></li>
          <li><a class="scrollto" href="#about">Info</a></li>
          <li><a class="scrollto" href="#payment">Payment</a></li>
          <li><a class="scrollto" href="#contact">Contact</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <section id="hero" class="d-flex align-items-center">
    <div class="container position-relative" data-aos="fade-up" data-aos-delay="500">
      <h1>Welcome to The Jungle</h1>
      <h2>The only gym in Perth with Bouldering, Speed and Lead climbing</h2>
      <a href="#about" class="btn-get-started scrollto">Buy discounted entry now!</a>
    </div>
  </section><!-- End Hero -->

  <main id="main">

    <!-- ======= About Section ======= -->
    <section id="about" class="about">
      <div class="container">
        <div class="row">
          <div class="col-lg-6 order-1 order-lg-2" data-aos="fade-left">
            <img src="assets/img/about.jpg" class="img-fluid" alt="">
          </div>
          <div class="col-lg-6 pt-4 pt-lg-0 order-2 order-lg-1 content" data-aos="fade-right">
            <h3>Save over 30% on an all-inclusive day pass</h3>
            <p class="text-body-secondary">Take advantage of this incredible offer:</p>
            <ul>
              <li><i class="bi bi-check-circle"></i>All-day entry</li>
              <li><i class="bi bi-check-circle"></i>Climbing gear included</li>
            </ul>
          </div>
        </div>
      </div>
    </section><!-- End About Section -->

    <!-- ======= Clients Section ======= -->
    <section id="clients" class="clients">
      <div class="container">
      </div>
    </section><!-- End Clients Section -->

    <!-- ======= payment Section ======= -->
    <section id="payment" class="payment">
      <div class="container">

        <div class="section-title">
          <span>Open Pass</span>
          <h2>Open Pass</h2>
          <small class="text-muted">By proceeding with the payment, you acknowledge and agree to the terms and conditions below.</small>
        </div>

        <div class="row">
        
          <div class="col-lg-6 content" data-aos="fade-up">
            <form name="orderForm" id="orderForm" class="row mt-0 mx-0 g-3 ">
              <input name="ID" type="text" hidden>
              <input name="Value" type="text" hidden>
              <input name="From" type="text" hidden>
              <input name="Message" type="text" hidden>
              <input name="Email" type="email" hidden>
              <input name="Clubworx" type="text" hidden>

              <div class="row mb-3">
                <label for="Email_recepient" class="col-sm-4 col-form-label">Your email address</label>
                <div class="col-sm-8">
                  <input class="form-control" name="Email_recepient" type="email" id="Email_recepient" placeholder="@"
                    required>
                  <div id="emailHelp" class="form-text">Email to send the purchase confirmation.</div>
                </div>
              </div>
              <div class="row mb-3">
                <label for="To" class="col-sm-4 col-form-label">Recipient</label>
                <div class="col-sm-8">
                  <input name="To" id="To" type="text" class="form-control" placeholder="Adam Ondra" maxlength="100"
                    required>
                  <div id="toHelp" class="form-text">Full name of the recipient</div>
                </div>
              </div>
              
              <div class="row mb-3">
                <label for="list-group" class="col-form-label">Choose your deal</label>
                <div class="col-sm-6 pe-0">
                  <ul class="list-group">
                    <li class="list-group-item">
                      <input class="form-check-input me-1" type="radio" name="deals" value="2 adults, 2 children" price="89.95" id="deal01" checked>
                      <label class="form-check-label" for="deal01">
                          <div>2 adults, 2 children</div>
                          <small class="text-body-secondary">was $115.00, <strong>now $89.95</strong></small>
                      </label>
                    </li>
                    <li class="list-group-item">
                      <input class="form-check-input me-1" type="radio" name="deals" value="2 adults, 1 child" price="69.95" id="deal02">
                      <label class="form-check-label" for="deal02">
                          <div>2 adults, 1 child</div>
                          <small class="text-body-secondary">was $96.00, <strong>now $69.95</strong></small>
                      </label>
                    </li>
                    <li class="list-group-item">
                      <input class="form-check-input me-1" type="radio" name="deals" value="1 adult, 1 child" price="44.95" id="deal03">
                      <label class="form-check-label" for="deal03">
                          <div>1 adult, 1 child</div>
                          <small class="text-body-secondary">was $62.00, <strong>now $44.95</strong></small>
                      </label>
                    </li>
                    <li class="list-group-item">
                      <input class="form-check-input me-1" type="radio" name="deals" value="2 adults" price="49.95" id="deal04">
                      <label class="form-check-label" for="deal04">
                          <div>2 adults</div>
                          <small class="text-body-secondary">was $60.00, <strong>now $49.95</strong></small>
                      </label>
                    </li>
                  </ul>
                </div>
                <div class="col-sm-6 pe-0">
                  <ul class="list-group">
                    <li class="list-group-item">
                      <input class="form-check-input me-1" type="radio" name="deals" value="1 adult, 1 concession" price="44.95" id="deal05">
                      <label class="form-check-label" for="deal05">
                        <div>1 adult, 1 concession</div>
                          <small class="text-body-secondary">was $64.00, <strong>now $44.95</strong></small>
                      </label>
                    </li>
                    <li class="list-group-item">
                      <input class="form-check-input me-1" type="radio" name="deals" value="2 concession" price="39.95" id="deal06">
                      <label class="form-check-label" for="deal06">
                        <div>2 concession</div>
                          <small class="text-body-secondary">was $60.00, <strong>now $39.95</strong></small>
                      </label>
                    </li>
                    <li class="list-group-item">
                      <input class="form-check-input me-1" type="radio" name="deals" value="1 concession, 1 child" price="37.95" id="deal07">
                      <label class="form-check-label" for="deal07">
                          <div>1 concession, 1 child</div>
                          <small class="text-body-secondary">was $58.00, <strong>now $37.95</strong></small>
                      </label>
                    </li>
                  </ul>
                </div>
              </div>
              <select style="visibility: hidden" id="quantitySelect"></select>
            </form>
          </div>

          <div class="col-lg-6 " data-aos="fade-up">
            <div id="loadingSpinner" class="text-center" style="display: none;">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
            <div class="alert alert-danger text-center" role="alert" id="warningMassage">
              Make sure all information are complete before proceeding with the payment.
            </div>
            <div id="paypal-button-container"></div>
          </div>

        </div>


        <div class="row">
          <div class="pt-4 pt-lg-0 content" data-aos="fade-right">
            <h4>Terms and Conditions</h4>
            <p class="text-body-secondary">Please take note of the following important details:</p>
            <ul>
              <li>The Open Pass is non-transferable and can only be redeemed by the individual(s) listed on the pass.</li>
              <li>The Open Pass is valid for 3 months from the date of purchase.</li>
              <li>The pass must be used all at once and cannot be divided over multiple visits.</li>
              <li>No refunds will be issued for unused portions of the Open Pass.</li>
              <li>Only one voucher can be redeemed per family.</li>
              <li>No extensions or exceptions to the expiration date will be granted.</li>
              <li>Child: Ages 12 and under | Concession: Ages 18 and under or students with a valid student card.</li>
              <li>Management reserves the right to change or cancel the event or service, in which case a refund equal to the purchase price of the Open Pass will be provided. </li>
              <li>By purchasing the Open Pass, you acknowledge and agree to these terms and conditions.</li>
            </ul>
            <p>
              If you have any further questions or require additional clarification, please do not hesitate to reach
              out. We are here to assist you.
            </p>
          </div>
        </div>
      </div>
    </section><!-- End payment Section -->


    <!-- ======= Cta Section ======= -->
    <section id="cta" class="cta">
      <div class="container" data-aos="zoom-in">

        <div class="text-center">
          <h3>First time in the Jungle?</h3>
          <p>Learn how to prepare for your first visit for an unforgettable experience.</p>
          <a class="cta-btn" href="https://www.urbanjungleirc.com/firsttime">Find out more</a>
        </div>

      </div>
    </section><!-- End Cta Section -->

    <!-- ======= Contact Section ======= -->
    <section id="contact" class="contact">
      <div class="container">

        <div class="section-title">
          <span>Contact</span>
          <h2>Contact</h2>
        </div>

        <div class="row" data-aos="fade-up">
          <div class="col-lg-6">
            <div class="info-box mb-4">
              <i class="bx bx-map"></i>
              <h3>Our Address</h3>
              <p>83 Solomon Rd, Jandakot WA 6164</p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6">
            <div class="info-box  mb-4">
              <i class="bx bx-envelope"></i>
              <h3>Email Us</h3>
              <p><a href="mailto:admin@urbanjungleirc.com">admin@urbanjungleirc.com</a></p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6">
            <div class="info-box  mb-4">
              <i class="bx bx-phone-call"></i>
              <h3>Call Us</h3>
              <p><a href="tel:+61863970411">(08) 6397 0411</a></p>
            </div>
          </div>

        </div>

        <div class="row" data-aos="fade-up">

          <div class="col-lg-12 ">
            <iframe class="mb-4 mb-lg-0"
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3379.114822175818!2d115.86380765812764!3d-32.1202012069698!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2a3297c36f006933%3A0xba34af7afadb8d16!2sUrban%20Jungle%20Indoor%20Rock%20Climbing!5e0!3m2!1sen!2sau!4v1689743780613!5m2!1sen!2sau"
              frameborder="0" style="border:0; width: 100%; height: 384px;" allowfullscreen></iframe>
          </div>

        </div>

      </div>
    </section><!-- End Contact Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>Urban Jungle IRC</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/day-multipurpose-html-template-for-free/ -->
        Designed by <a href="https://bootstrapmade.com/" class="link-light">BootstrapMade</a>
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <!-- <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <!-- <script src="assets/vendor/php-email-form/validate.js"></script> -->

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- PayPay button references -->
  <script
    src="https://www.paypal.com/sdk/js?client-id=AdAVYdDfxnQOiy6JRVbg-MEG9bj2QE8hcxTe_Odjwc7Vp-IQSFG4NHd31Q0B7ZGCB8XV29crxXqOW88I&enable-funding=venmo&currency=AUD&locale=en_AU"
    data-sdk-integration-source="button-factory">
    </script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <script>

    $(document).ready(function () {
      // hide PayPal on users input - immediate feedback as the user types
      $('#Email_recepient').on('input', function () {
        togglePayPalButton(false);
      });
    });

    document.getElementById('Email_recepient').addEventListener('input', function (event) {
      // Reset custom validity message to ensure the browser checks for its native validity anew
      this.setCustomValidity("");

      // Check if the email format is generally correct
      if (this.validity.typeMismatch) {
          this.setCustomValidity("Enter a valid email address, like name@example.com .");
      } else {
          // Further custom validation to ensure the domain part contains a dot
          var emailParts = this.value.split('@');
          if (emailParts.length === 2 && !emailParts[1].includes('.')) {
              this.setCustomValidity("Please include a domain with a '.' in the email address.");
          }
      }

      // Update the validity state which will now use either the custom message or default browser validation
      this.reportValidity();

  });


    function togglePayPalButton(show) {
      // If show is true, display the button container, else hide it
      $('#paypal-button-container').css('display', show ? 'block' : 'none');
    }

    function updateWarningMessage(correct, text) {
      // Update the warning message based on form validation
      let element = document.getElementById("warningMassage");
      if (correct) {
        element.classList.remove("alert-danger");
        element.classList.add("alert-light");
      } else {
        element.classList.remove("alert-light");
        element.classList.add("alert-danger");
      }
      element.innerText = text;
    }

    // PayPal setup
    function initPayPalButton() {
      var shipping = 0;
      var quantity = parseInt();
      var orderDescription = 'Open Pass promotion';
      const promoID = 'promo1';
      paypal.Buttons({
        style: {
          shape: 'rect',
          color: 'gold',
          layout: 'vertical',
          label: 'paypal',
        },

        // onInit is called when the button first renders
        onInit: function (data, actions) {
          // Disable the buttons
          actions.disable();

          const emailInut = document.getElementById('Email_recepient');
          const nameInput = document.getElementById('To');

          // Add event listeners to each input field
          emailInut.addEventListener('change', validateEmailField);
          nameInput.addEventListener('input', validateForm);

          // Check radio buttons state change
          $('input[type=radio][name=deals]').change(function() {
            validateForm(); // Call validate form function when a radio option is selected or changed
          });

          function validateForm() {
            const radioButtons = document.querySelectorAll('input[type=radio][name=deals]');
            const isRadioSelected = [...radioButtons].some(radio => radio.checked); // Check if any radio button is selected
            
            if (nameInput.checkValidity() && emailInut.checkValidity() && isRadioSelected) {
              updateWarningMessage(true, 'Please proceed with the payment below.');
              togglePayPalButton(true); // Enable PayPal button if form is valid including radio selection
            } else {
              updateWarningMessage(false, 'Please ensure to fill in all details including a valid email address, name and selecting a deal.');
              togglePayPalButton(false); // Keep PayPal button disabled if form is invalid
            }
          }

          function validateEmailField() {
            var email = $('#Email_recepient').val();
            var googleAppsScriptUrl = 'https://script.google.com/macros/s/AKfycbzwuisjdx9eIuTxhGvXM2hfLUbLm0wrPtOy_Xd3vVGhRNid4a5tuE84cKxkuIONqJh8Dw/exec';

            // Show loading spinner
            $('#loadingSpinner').show();

            // Append the email as a query parameter
            var urlWithParams = googleAppsScriptUrl + '?email=' + encodeURIComponent(email);

            $.ajax({
              url: urlWithParams,
              type: 'GET',
              dataType: 'json',
              success: function (data) {
                // Hide loading spinner
                $('#loadingSpinner').hide();
                if (data.exists) {
                  updateWarningMessage(false, "This is a one-time offer. Unfortunately you can't redeem it again.");
                  actions.disable();
                } else {
                  validateForm();
                }
              },
              error: function () {
                // Hide loading spinner
                $('#loadingSpinner').hide();
                updateWarningMessage(false, 'We are experiencing technical difficulties. Please try again in a few moments or contact us for assistance.');
                actions.disable();
              }
            });
          }

        },

        createOrder: function (data, actions) {
          const form = document.forms['orderForm'];
          // Extract the selected radio button details
          const selectedRadio = document.querySelector('input[type=radio][name=deals]:checked');
          var selectedItemDescription = selectedRadio.value;
          var selectedItemPrice = parseFloat(selectedRadio.getAttribute("price"));

          var tax = (0 === 0 || false) ? 0 : (selectedItemPrice * (parseFloat(0) / 100));
          quantity = 1;
          tax *= quantity;
          tax = Math.round(tax * 100) / 100;
          var priceTotal = quantity * selectedItemPrice + parseFloat(shipping) + tax;
          var handling = 0;
          priceTotal = priceTotal + handling;
          priceTotal = Math.round(priceTotal * 100) / 100;
          var itemTotalValue = Math.round((selectedItemPrice * quantity) * 100) / 100;
          return actions.order.create({
            purchase_units: [{
              description: orderDescription,
              amount: {
                currency_code: 'AUD',
                value: priceTotal,
                breakdown: {
                  item_total: {
                    currency_code: 'AUD',
                    value: itemTotalValue,
                  },
                  shipping: {
                    currency_code: 'AUD',
                    value: shipping,
                  },
                  tax_total: {
                    currency_code: 'AUD',
                    value: tax,
                  },
                  handling: {
                    currency_code: "AUD",
                    value: handling,
                  },
                }
              },
              items: [{
                name: selectedItemDescription,
                unit_amount: {
                  currency_code: 'AUD',
                  value: selectedItemPrice,
                },
                quantity: quantity
              }]
            }],
            application_context: {
              shipping_preference: "NO_SHIPPING" // no shipping option for goods
            }
          });
        },
        onApprove: function (data, actions) {
          return actions.order.capture().then(function (orderData) {
            // Full available details
            console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
            document.getElementById("warningMassage").hidden = true;

            // Extract needed information
            const firstName = orderData.payer.name.given_name;
            const productName = orderData.purchase_units[0].items[0].name;

            // Show a success message within this page
            const element = document.getElementById('paypal-button-container');
            element.innerHTML = '';
            // element.innerHTML = ` <div class="alert alert-success" role="alert">
            //                         <h4 class="alert-heading">Thank you, ${firstName}!</h4>
            //                         <p>Your payment of ${orderData.purchase_units[0].amount.breakdown.item_total.value} for the <strong>Family Pass (2 adults and 2 children)</strong> has been successfully processed.</p>
            //                         <p>A confirmation email will be sent to your address ${orderData.payer.email_address} shortly.</p>
            //                         <hr>
            //                         <p>If you have any additional questions or need further assistance, please feel free to contact us.</p>
            //                         <p class="mb-0">Thank you for choosing <a href="http://urbanjungleirc.com" class="alert-link">Urban Jungle IRC</a>!</p>
            //                         </div>`

            // Update the order form and send it to Google Sheet
            const form = document.forms['orderForm'];
            form.elements["Email"].value = orderData.payer.email_address;
            if (form.elements["To"].value === '') {
              form.elements["To"].value = orderData.payer.name.given_name + ' ' + orderData.payer.name.surname;
            }
            form.elements["Clubworx"].value = promoID;
            form.elements["ID"].value = orderData.id;
            form.elements["Value"].value = orderData.purchase_units[0].amount.breakdown.item_total.value;
            form.elements["Message"].value = productName;
            const scriptURL = 'https://script.google.com/macros/s/AKfycbyHm4EnIXmNhPkkqjpoqYhWfve5NoSwUQLLdNv3kADpBFiXFCAOEvQUxwR1PV5fOgw/exec';
            fetch(scriptURL, {
              method: 'POST',
              body: new FormData(form)
            })
              .then(response => {
                console.log('Success!', response);
                // Redirect to the thank you page with query parameters after data saved succesfully
                window.location.href = `thankyou.html?promoID=${encodeURIComponent(promoID)}&firstName=${encodeURIComponent(firstName)}&productName=${encodeURIComponent(productName)}`;
              })
              .catch(error => console.error('Error!', error.message));
          });
        },
        onError: function (err) {
          console.log(err);
        },
      }).render('#paypal-button-container');
    }

    initPayPalButton();
    togglePayPalButton(false);

  </script>

</body>

</html>